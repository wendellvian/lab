<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection" content="telephone=no, email=no" />
	<title>设备方向传感器</title>
	<link rel="stylesheet" href="/css/base.css" type="text/css" />
	<script src="/js/prefixfree.min.js" type="text/javascript"></script>
	<script src="/js/zepto.min.js" type="text/javascript"></script>
	<style>
	.box{width:50px;height:50px;background:#8b58cb;position:absolute;left:100px;top:100px;}
	</style>
</head>
<body>
	<div class="box" id="box"></div>
	<div>轴alpha(α): <span id="alpha"></span> 转速度/秒</div>
	<div>轴beta(β): <span id="beta"></span> 转速度/秒</div>
	<div>轴gamma(γ): <span id="gamma"></span> 转速度/秒</div>
	<em>请使用手机测试</em>

	<script>
	var $box = $(".box"),
		boxW = $box.width(),
		boxH = $box.height(),
		winW = $(window).width(),
		winH = $(window).height();
	function orientation(e){
		var _event = e || event,
			movel = parseInt(_event.gamma) == 1 ? 0 : parseInt(_event.gamma),
			movet = parseInt(_event.beta) == 1 ? 0 : parseInt(_event.beta),
			l = $box.position().left + movel,
			t = $box.position().top + movet;
		if(l >= (winW-boxW)){
			l = winW-boxW;
		}else if(l <= 0){
			l = 0;
		}
		if(t >= (winH-boxH)){
			t = winH-boxH;
		}else if(t <= 0){
			t = 0;
		}
		$box.css({left:l,top:t});

		console.log(_event);

		$("#alpha").html(parseInt(_event.alpha));
		$("#beta").html(parseInt(_event.beta));
		$("#gamma").html(parseInt(_event.gamma));
	}
	if(window.DeviceOrientationEvent){
		window.addEventListener("deviceorientation", orientation, false);
	};
	</script>
</body>
</html>